$("#table_cmd").sortable({axis:"y",cursor:"move",items:".cmd",placeholder:"ui-state-highlight",tolerance:"intersect",forcePlaceholderSize:true});function addCmdToTable(_cmd){if(!isset(_cmd))var _cmd={configuration:{}};if(!isset(_cmd.configuration))_cmd.configuration={};if(_cmd.logicalId=="etat"){$("#_idSH").html('{{Afficher}}');}else if(_cmd.logicalId=="temperature"){$("#_idSH").html('{{Afficher}}'+"/"+'{{Historiser}}');}
var tr='<tr class="cmd" data-cmd_id="'+init(_cmd.id)+'">';tr+='<td>';tr+='<span class="cmdAttr" data-l1key="id"></span>';tr+='</td>';tr+='<td>';tr+='<span class="cmdAttr" data-l1key="name" style="width:140px;"></span>';tr+='</td>';tr+='<td>';tr+='<span class="cmdAttr" data-l1key="type">'+init(_cmd.type)+'</span>';tr+='<br/><span class="cmdAttr" data-l1key="subType">'+init(_cmd.subType)+'</span>';tr+='</td>';tr+='<td style="width:200px;">';if(_cmd.configuration['canBeVisible']=='1'){tr+='<span><input type="checkbox" class="cmdAttr" data-size="mini" data-l1key="isVisible" checked/> {{Afficher}}</span><br/>';}
if(_cmd.configuration['canBeHistorize']=='1'){tr+='<span><input type="checkbox" class="cmdAttr" data-l1key="isHistorized"/> {{Historiser}}</span><br/>';}
tr+='</td>';tr+='<td>';if(is_numeric(_cmd.id)){tr+='<a class="btn btn-default btn-xs cmdAction" data-action="configure"><i class="fa fa-cogs"></i></a> ';tr+='<a class="btn btn-default btn-xs cmdAction" data-action="test"><i class="fa fa-rss"></i> {{Tester}}</a>';}
tr+='</td>';tr+='</tr>';$('#table_cmd tbody').append(tr);$('#table_cmd tbody tr:last').setValues(_cmd,'.cmdAttr');if(isset(_cmd.type))$('#table_cmd tbody tr:last .cmdAttr[data-l1key=type]').value(init(_cmd.type));jeedom.cmd.changeType($('#table_cmd tbody tr:last'),init(_cmd.subType));}